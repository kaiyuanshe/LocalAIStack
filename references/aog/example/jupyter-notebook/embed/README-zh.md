# Embed æœåŠ¡åœºæ™¯ç¤ºä¾‹

æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ AOG Embed API ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡ã€‚

## ğŸ“ åœºæ™¯æè¿°

Embed æœåŠ¡å¯ä»¥ï¼š
- å°†æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´å‘é‡è¡¨ç¤º
- ç”¨äºè¯­ä¹‰æœç´¢å’Œç›¸ä¼¼åº¦è®¡ç®—
- æ”¯æŒæ‰¹é‡æ–‡æœ¬åµŒå…¥
- ç”¨äºæ–‡æœ¬èšç±»å’Œåˆ†ç±»

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬ç¤ºä¾‹ï¼Œä½ å°†å­¦ä¼šï¼š
1. å¦‚ä½•è°ƒç”¨ AOG Embed API
2. å¦‚ä½•å¤„ç†åµŒå…¥å‘é‡
3. å¦‚ä½•è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦
4. å¦‚ä½•è¿›è¡Œè¯­ä¹‰æœç´¢

## ğŸ”Œ API ç«¯ç‚¹

```
POST http://localhost:16688/aog/v0.2/services/embed
```

## ğŸ“‹ è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | æè¿° |
|------|------|------|------|
| `model` | string | å¦ | æ¨¡å‹åç§°ï¼Œå¦‚ `text-embedding-v3` |
| `input` | array | æ˜¯ | æ–‡æœ¬æ•°ç»„ï¼Œéœ€è¦ç”ŸæˆåµŒå…¥çš„æ–‡æœ¬åˆ—è¡¨ |

### è¯·æ±‚ç¤ºä¾‹

```json
{
  "model": "text-embedding-v3",
  "input": [
    "è¿™æ˜¯ç¬¬ä¸€æ®µæ–‡æœ¬",
    "è¿™æ˜¯ç¬¬äºŒæ®µæ–‡æœ¬"
  ]
}
```

## ğŸ“Š å“åº”æ ¼å¼

```json
{
  "data": [
    {
      "embedding": [-0.0695, 0.0306, ...],
      "index": 0,
      "object": "embedding"
    },
    {
      "embedding": [-0.0634, 0.0604, ...],
      "index": 1,
      "object": "embedding"
    }
  ],
  "model": "text-embedding-v3",
  "id": "73591b79-d194-9bca-8bb5-xxxxxxxxxxxx"
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å…ˆå†³æ¡ä»¶

1. âœ… AOG æœåŠ¡å·²å®‰è£…å¹¶è¿è¡Œ
2. âœ… Embed æœåŠ¡å·²å®‰è£…
3. âœ… å·²ä¸‹è½½æ‰€éœ€çš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ `text-embedding-v3`ï¼‰

### è¿è¡Œæ­¥éª¤

1. ç¡®ä¿ AOG æœåŠ¡æ­£åœ¨è¿è¡Œ
2. æ‰“å¼€ [embed.ipynb](./embed.ipynb)
3. æŒ‰é¡ºåºæ‰§è¡Œ notebook ä¸­çš„ä»£ç å•å…ƒæ ¼

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. è¯­ä¹‰æœç´¢

```python
# ç”ŸæˆæŸ¥è¯¢å’Œæ–‡æ¡£çš„åµŒå…¥
query_embedding = get_embedding("ç”¨æˆ·æŸ¥è¯¢")
doc_embeddings = get_embeddings(["æ–‡æ¡£1", "æ–‡æ¡£2", "æ–‡æ¡£3"])

# è®¡ç®—ç›¸ä¼¼åº¦ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„æ–‡æ¡£
similarities = cosine_similarity(query_embedding, doc_embeddings)
```

### 2. æ–‡æœ¬èšç±»

```python
# ç”Ÿæˆå¤šä¸ªæ–‡æœ¬çš„åµŒå…¥
embeddings = get_embeddings(texts)

# ä½¿ç”¨èšç±»ç®—æ³•ï¼ˆå¦‚ K-meansï¼‰å¯¹æ–‡æœ¬è¿›è¡Œåˆ†ç»„
from sklearn.cluster import KMeans
kmeans = KMeans(n_clusters=3)
clusters = kmeans.fit_predict(embeddings)
```

### 3. ç›¸ä¼¼åº¦è®¡ç®—

```python
# è®¡ç®—ä¸¤æ®µæ–‡æœ¬çš„ç›¸ä¼¼åº¦
text1_emb = get_embedding("æ–‡æœ¬1")
text2_emb = get_embedding("æ–‡æœ¬2")
similarity = cosine_similarity(text1_emb, text2_emb)
```

## ğŸ” å¸¸è§é—®é¢˜

**Q: åµŒå…¥å‘é‡çš„ç»´åº¦æ˜¯å¤šå°‘ï¼Ÿ**  
A: å–å†³äºä½¿ç”¨çš„æ¨¡å‹ï¼Œé€šå¸¸åœ¨ 384 åˆ° 1536 ç»´ä¹‹é—´ã€‚

**Q: å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼Ÿ**  
A: æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©ï¼š
- é€šç”¨æ–‡æœ¬ï¼š`text-embedding-v3`
- å¤šè¯­è¨€ï¼šé€‰æ‹©æ”¯æŒå¤šè¯­è¨€çš„æ¨¡å‹
- ç‰¹å®šé¢†åŸŸï¼šä½¿ç”¨é¢†åŸŸä¸“ç”¨æ¨¡å‹

**Q: æ‰¹é‡å¤„ç†çš„æœ€å¤§æ•°é‡ï¼Ÿ**  
A: å»ºè®®å•æ¬¡è¯·æ±‚ä¸è¶…è¿‡ 100 ä¸ªæ–‡æœ¬ï¼Œè¿‡å¤šå¯èƒ½å¯¼è‡´è¶…æ—¶ã€‚

**Q: å¦‚ä½•å­˜å‚¨å’Œæ£€ç´¢åµŒå…¥å‘é‡ï¼Ÿ**  
A: å¯ä»¥ä½¿ç”¨å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Milvusã€Pineconeã€Weaviateï¼‰è¿›è¡Œé«˜æ•ˆå­˜å‚¨å’Œæ£€ç´¢ã€‚

## ğŸ“š ç›¸å…³èµ„æº

- [AOG API æ–‡æ¡£](../../docs/)
- [è¿”å›ä¸»é¡µ](../README.md)
- [Chat æœåŠ¡ç¤ºä¾‹](../text-generation/)
